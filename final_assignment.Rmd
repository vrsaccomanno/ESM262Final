---
title: "ESM262_Final_Assignment"
author: "Vienna Saccomanno"
date: "6/4/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
#Attach packages
library(tidyverse)

#Source functions
source("R/mean_rainfall.R")
```


```{r data}
clim_table <- read.table("clim.txt") %>% 
  unique()

```

```{r clim_fxn_1}
#Climte data summarization function #1 = mean rainfall, maximum temperature and minimum temperature by year
mean_output = mean_rain_temp(clim_table)
mean_output
```

```{r measure_fxn_1}

#Creating sample data for the impact funcation 1
mean_rain <- clim_table %>% 
    select(year,rain) %>% 
    group_by(year) %>% 
    summarize(mean_rain = mean(rain)) %>% 
    mutate(water_consumption = round((runif(75, min = 25, max = 50)), 2)) %>% 
    mutate(water_price = round((runif(75, min = 1, max = 8)), 2))

    
for(i in 2:nrow(mean_rain)){
  
  mean_rain$water_consumption[i] = mean_rain$water_consumption[i-1] + mean_rain$water_consumption[i-1]*0.005
  
}

for(i in 2:nrow(mean_rain)){
  
  mean_rain$water_price[i] = mean_rain$water_price[i-1] + mean_rain$water_price[i-1]*0.005
}

source("R/drought_cost.R")

mean_output = compute_water_NPV(df = mean_rain, mean_rain = mean_rain,water_consumption = water_consumption,water_price = water_price)

mean_output

```

